<link rel="stylesheet" type="text/css" href="rules.scss">
<p id="notice"><%= notice %></p>

<h1>Listing Rules</h1>
<div class="table-responsive"> 
    <table class="table table-bordered">

  <thead>
    <tr>
      <th>Name</th>
      <th>Metric</th>
      <th>Operation</th>
      <th>Value</th>
      <th>Metric type</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @rules.each do |rule| %>
      <tr>
         <td><%= rule.name %></td>
        <td><%= @vara = rule.metric_id 
     metric = Metric.find(@vara) 
     metric.name %></td>
        <td><%= rule.operation %></td>
        <td><%= rule.value %></td>

        <!-- 
        Checking wheter its a value or state metric -->

        <% if rule.mtype == 1 %>
        <td style="color:green">Value Metric</td>
        <% else %>
        <td style="color:blue">State Metric</td>
        <% end %>
        <!-- design the button -->
        
        <td class="btn btn-primary button"><%= link_to 'Show', rule %></td>
        <td class="btn btn-primary button"><%= link_to 'Edit', edit_rule_path(rule) %></td>
        <td class="btn btn-danger button"><%= link_to 'Destroy', rule, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>


<br>

<div class="btn btn-success button">
<%= link_to 'New Rule', new_rule_path %>
</div>
